<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 class="text-center">Admin Panel</h1>

        <!-- Login Section -->
        <div id="login-section">
            <h3>Admin Login</h3>
            <div class="mb-3">
                <label for="adminEmail" class="form-label">Email</label>
                <input type="email" id="adminEmail" class="form-control">
            </div>
            <div class="mb-3">
                <label for="adminPassword" class="form-label">Password</label>
                <input type="password" id="adminPassword" class="form-control">
            </div>
            <button class="btn btn-primary" id="login-btn">Login</button>
        </div>

        <!-- Admin Dashboard -->
        <div id="dashboard-section" class="hidden">
            <h3>Welcome, Admin!</h3>

            <!-- Add Actor Section -->
            <div class="mt-4">
                <h4>Add Actor</h4>
                <div class="mb-3">
                    <label for="actorName" class="form-label">Actor Name</label>
                    <input type="text" id="actorName" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="actorImg" class="form-label">Actor Image URL</label>
                    <input type="url" id="actorImg" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="actorId" class="form-label">Actor ID</label>
                    <input type="text" id="actorId" class="form-control">
                </div>
                <button class="btn btn-success" id="add-actor-btn">Add Actor</button>
            </div>

            <!-- Add Movie Section -->
            <div class="mt-4">
                <h4>Add Movie</h4>
                <div class="mb-3">
                    <label for="movieActorName" class="form-label">Actor Name</label>
                    <input type="text" id="movieActorName" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="movieName" class="form-label">Movie Name</label>
                    <input type="text" id="movieName" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="movieDuration" class="form-label">Duration</label>
                    <input type="text" id="movieDuration" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="movieGenre" class="form-label">Genre</label>
                    <input type="text" id="movieGenre" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="movieDescription" class="form-label">Description</label>
                    <textarea id="movieDescription" class="form-control" rows="3"></textarea>
                </div>
                <div class="mb-3">
                    <label for="movieYear" class="form-label">Release Year</label>
                    <input type="number" id="movieYear" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="movieImg" class="form-label">Movie Image URL</label>
                    <input type="url" id="movieImg" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="slideImg" class="form-label">Slide Image URL</label>
                    <input type="url" id="slideImg" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="movieId" class="form-label">Movie ID</label>
                    <input type="text" id="movieId" class="form-control">
                </div>
                <button class="btn btn-success" id="add-movie-btn">Add Movie</button>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCg5ZdrJpVjv-duGNzRAifeTejepDHy-h0",
            authDomain: "loginpage-73b33.firebaseapp.com",
            projectId: "loginpage-73b33",
            storageBucket: "loginpage-73b33.appspot.com",
            messagingSenderId: "77682880566",
            appId: "1:77682880566:web:4204a645ae1fcade072897",
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);

        // Admin Credentials
        const ADMIN_EMAIL = "admin@example.com";
        const ADMIN_PASSWORD = "admin123";

        // DOM Elements
        const loginSection = document.getElementById("login-section");
        const dashboardSection = document.getElementById("dashboard-section");

        document.getElementById("login-btn").addEventListener("click", () => {
            const email = document.getElementById("adminEmail").value;
            const password = document.getElementById("adminPassword").value;

            if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {
                loginSection.classList.add("hidden");
                dashboardSection.classList.remove("hidden");
            } else {
                alert("Invalid credentials!");
            }
        });

        document.getElementById("add-actor-btn").addEventListener("click", async () => {
            const name = document.getElementById("actorName").value;
            const img = document.getElementById("actorImg").value;
            const id = document.getElementById("actorId").value;

            if (name && img && id) {
                try {
                    await db.collection("actors").add({
                        actorName: name,
                        actorImg: img,
                        actorId: id
                    });
                    alert("Actor added successfully!");
                } catch (error) {
                    console.error("Error adding actor:", error);
                }
            } else {
                alert("Please fill all fields for the actor.");
            }
        });

        document.getElementById("add-movie-btn").addEventListener("click", async () => {
            const actorName = document.getElementById("movieActorName").value;
            const name = document.getElementById("movieName").value;
            const duration = document.getElementById("movieDuration").value;
            const genre = document.getElementById("movieGenre").value;
            const description = document.getElementById("movieDescription").value;
            const year = document.getElementById("movieYear").value;
            const img = document.getElementById("movieImg").value;
            const slideImg = document.getElementById("slideImg").value;
            const movieId = document.getElementById("movieId").value;

            if (actorName && name && duration && genre && description && year && img && slideImg && movieId) {
                try {
                    await db.collection("movielist").add({
                        actorName,
                        Moviename: name,
                        Duration: duration,
                        Genere: genre,
                        Description: description,
                        Realesedyear: parseInt(year),
                        movieimg: img,
                        slideimg: slideImg,
                        movieid: movieId
                    });
                    alert("Movie added successfully!");
                } catch (error) {
                    console.error("Error adding movie:", error);
                }
            } else {
                alert("Please fill all fields for the movie.");
            }
        });
    </script>